(this["webpackJsonpasx-annoucements"]=this["webpackJsonpasx-annoucements"]||[]).push([[0],{47:function(e,a,t){e.exports=t(71)},52:function(e,a,t){},71:function(e,a,t){"use strict";t.r(a);var n=t(1),c=t.n(n),r=t(36),i=t.n(r),l=(t(52),t(32)),o=t.n(l),s=t(23),u=t(37),m=t(19),d=t(21),p=t(38),v=(t(54),t(29)),E=t(17),b=t(18),f=t(11),O=t.n(f),_=t(39),j=t.n(_),k=t(73),h=t(76),y=t(77),w=t(74),S=t(75),g=t(40),N=t.n(g);function D(){var e=Object(p.a)(["\nsubscription SubcribeAnnouncements ( $time_before: timestamptz!, $is_price_sensitive: [Boolean!], $market_cap_lower: numeric, $market_cap_upper: numeric ) {\n\tannouncements( \n\t\twhere: { \n            time: { _gte: $time_before },\n\t\t\tis_price_sensitive: { _in: $is_price_sensitive },\n            stock: { market_cap: { _gte: $market_cap_lower, _lte: $market_cap_upper }}\n\t\t},\n\t\torder_by: { time: desc }\n\t) {\n\t\tann_download_url\n\t\tdescription\n\t\thotcopper_url\n\t\tid time\n\t\tis_price_sensitive\n\t\tstock {\n\t\t\tname ticker\n\t\t\tGICS exchange\n            market_cap\n\t\t}\n\t}\n}"]);return D=function(){return e},e}var x=j()(D()),C=[{label:"Small Cap",value:"small"},{label:"Medium Cap",value:"medium"},{label:"Large Cap",value:"large"}],M={small:{lower:0,upper:2e9},medium:{lower:2e9,upper:1e10},large:{lower:1e10,upper:1e18}};function A(){var e=Object(n.useState)(JSON.parse(localStorage.getItem("savedData"))),a=Object(d.a)(e,2),t=a[0],r=a[1],i=Object(n.useState)(!0),l=Object(d.a)(i,2),o=l[0],s=l[1],u=Object(n.useState)("small"),p=Object(d.a)(u,2),f=p[0],_=p[1],j=Object(n.useState)(!0),w=Object(d.a)(j,2),S=w[0],g=w[1],N=S?Object(k.a)(Object(h.a)(Object(y.a)(new Date,1),{hours:16,minutes:0,seconds:0})):Object(k.a)(0),D=Object(v.a)(x,{variables:{is_price_sensitive:o?[!0]:[!0,!1],time_before:N,market_cap_lower:M[f].lower,market_cap_upper:M[f].upper}}),A=D.data,q=D.loading,I=O.a.get(A,"announcements"),J=O.a.map(I,(function(e){var a=e.id;return Object(m.a)(Object(m.a)({},e),{},{read:O.a.get(t,[a,"read"],!1),saved:O.a.get(t,[a,"saved"],!1)})})),X=O.a.filter(J,{read:!1,saved:!1}),P=O.a.filter(J,{saved:!0}),R=O.a.filter(J,{read:!0,saved:!1});return Object(n.useEffect)((function(){t||r({}),localStorage.setItem("savedData",JSON.stringify(t))}),[t]),Object(n.useEffect)((function(){document.title="ASX  Ann Feed (".concat(O.a.size(X)," unread)")}),[X]),c.a.createElement("div",{className:"body"},c.a.createElement("div",{className:"header"},c.a.createElement($,null),c.a.createElement("h2",null,"ASX Recent Announcement Feed"),c.a.createElement("p",null,"A scraped collection of ASX announcements, data live updated every minute during peak hours."),c.a.createElement("p",null,"History of read and saved annoucments saved locally to your browser.")),c.a.createElement("div",{className:"inputs-box-row"},c.a.createElement("div",{onClick:function(){return s(!o)}},c.a.createElement("p",null,"Price sensitive only?"),o?c.a.createElement(E.a,{icon:b.a}):c.a.createElement(E.a,{icon:b.d,className:"unchecked"})),c.a.createElement("div",null,c.a.createElement("p",null,"Market cap"),c.a.createElement("select",{value:f,onChange:function(e){return _(e.target.value)}},!O.a.isEmpty(C)&&O.a.map(C,(function(e){var a=e.value,t=e.label;return c.a.createElement("option",{key:a,value:a},t)})))),c.a.createElement("div",{onClick:function(){return g(!S)}},c.a.createElement("p",null,"After 4pm yesterday only?"),S?c.a.createElement(E.a,{icon:b.a}):c.a.createElement(E.a,{icon:b.d,className:"unchecked"}))),q&&c.a.createElement("div",{className:"loader"},c.a.createElement(E.a,{icon:b.c,spin:!0,size:"3x"})),!q&&O.a.isEmpty(X)&&O.a.isEmpty(P)&&O.a.isEmpty(R)&&c.a.createElement("p",{className:"-colour-tertiary"},"No matching announcements"),!O.a.isEmpty(X)&&c.a.createElement("h5",null,"Unread (",O.a.size(X),"):"),!O.a.isEmpty(X)&&O.a.map(X,(function(e){return c.a.createElement(z,{data:e,key:e.id,savedData:t,setSavedData:r})})),!O.a.isEmpty(P)&&c.a.createElement("h5",null,"Saved (",O.a.size(P),"):"),!O.a.isEmpty(P)&&O.a.map(P,(function(e){return c.a.createElement(z,{data:e,key:e.id,savedData:t,setSavedData:r})})),!O.a.isEmpty(R)&&c.a.createElement("h5",null,"Read (",O.a.size(R),"):"),!O.a.isEmpty(R)&&O.a.map(R,(function(e){return c.a.createElement(z,{data:e,key:e.id,savedData:t,setSavedData:r})})))}var z=function(e){var a=e.data,t=e.savedData,n=e.setSavedData,r=a.id,i=a.description,l=a.hotcopper_url,d=a.stock,p=a.time,v=a.read,f=a.saved,_=a.is_price_sensitive,j=d.name,k=d.ticker,h=d.exchange,y=d.market_cap,g=Object(w.a)(p),D=O.a.compact(["Market Cap: ".concat(N()(y).format("0.0a")),!!_&&"Price Sensitive"]).join(" - "),x=function(){var e=Object(u.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(1e3);case 2:a=window.confirm("Save announcement:\n".concat(h,":").concat(k," - ").concat(i)),n(Object(m.a)(Object(m.a)({},t),{},Object(s.a)({},r,{saved:a,read:!0})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c.a.createElement("div",{className:"card"},c.a.createElement("div",{className:"card-header"},c.a.createElement("div",null,c.a.createElement("a",{href:"https://finance.yahoo.com/quote/".concat(k,".AX"),target:"_blank",rel:"noopener noreferrer"},h,":",k,j&&" - ".concat(j),c.a.createElement(E.a,{icon:b.b,size:"xs"})),c.a.createElement("p",null,D)),c.a.createElement("p",null,Object(S.a)(g,"h:mm aaa '-' EE do MMM"))),c.a.createElement("div",{className:"card-body"},c.a.createElement("a",{href:l,target:"_blank",rel:"noopener noreferrer",onClick:x},i,c.a.createElement(E.a,{icon:b.b,size:"xs"})),c.a.createElement("div",{className:"inputs-box-column"},c.a.createElement("div",{onClick:function(){return n(Object(m.a)(Object(m.a)({},t),{},Object(s.a)({},r,{read:v,saved:!f})))}},c.a.createElement("label",null,"Saved"),f?c.a.createElement(E.a,{icon:b.a}):c.a.createElement(E.a,{icon:b.d,className:"unchecked"})),c.a.createElement("div",{onClick:function(){return n(Object(m.a)(Object(m.a)({},t),{},Object(s.a)({},r,{saved:f,read:!v})))}},c.a.createElement("label",null,"Read"),v?c.a.createElement(E.a,{icon:b.a}):c.a.createElement(E.a,{icon:b.d,className:"unchecked"})))))},$=function(){var e=Object(n.useState)(new Date),a=Object(d.a)(e,2),t=a[0],r=a[1],i=Object(n.useState)(!1),l=Object(d.a)(i,2),o=l[0],s=l[1];return Object(n.useEffect)((function(){o||s(setInterval((function(){return r(new Date)}),1e3))}),[o]),c.a.createElement("h3",null,Object(S.a)(t,"h:mm:ss aaa '-' EE do MMM"))},q=function(e){return new Promise((function(a){setTimeout((function(){a()}),e)}))},I=t(14),J=t(20),X=t(44),P=t(46),R=t(15),B=t(2),F=t(45);function G(){var e=new P.a({uri:"https://quiet-river-86309.herokuapp.com/v1/graphql"}),a=new X.a({uri:"wss://quiet-river-86309.herokuapp.com/v1/graphql",options:{reconnect:!0,timeout:3e4}}),t=Object(R.d)((function(e){var a=e.query,t=Object(B.l)(a),n=t.kind,c=t.operation;return"OperationDefinition"===n&&"subscription"===c}),a,e),n=new J.c({link:t,cache:new F.a});return c.a.createElement(I.a,{client:n},c.a.createElement(A,null))}i.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(G,null)),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.e954131e.chunk.js.map