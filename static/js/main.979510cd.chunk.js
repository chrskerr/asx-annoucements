(this["webpackJsonpasx-annoucements"]=this["webpackJsonpasx-annoucements"]||[]).push([[0],{44:function(e,a,t){e.exports=t(67)},49:function(e,a,t){},67:function(e,a,t){"use strict";t.r(a);var n=t(1),c=t.n(n),r=t(35),i=t.n(r),l=(t(49),t(23)),s=t(19),o=t(21),u=t(36),m=(t(50),t(29)),d=t(17),E=t(18),b=t(11),v=t.n(b),p=t(37),f=t.n(p),_=t(69),h=t(72),O=t(73),j=t(70),S=t(71);function x(){var e=Object(u.a)(["\nsubscription SubcribeAnnouncements ( $time_before: timestamptz!, $is_price_sensitive: [Boolean!], $is_asx_300: [Boolean!], $incl_asx: String!, $incl_nsx: String! ) {\n\tannouncements( \n\t\twhere: { \n            time: { _gte: $time_before },\n\t\t\tis_price_sensitive: { _in: $is_price_sensitive },\n            _or: [\n                { stock: { is_asx_300: { _in: $is_asx_300 }, exchange: { _eq: $incl_asx }}},\n                { stock: { exchange: { _eq: $incl_nsx }}}\n            ]\n\t\t},\n\t\torder_by: { time: desc }\n\t) {\n\t\tann_download_url\n\t\tdescription\n\t\thotcopper_url\n\t\tid time\n\t\tis_price_sensitive\n\t\tstock {\n\t\t\tname ticker\n\t\t\tis_asx_300 GICS\n            exchange\n\t\t}\n\t}\n}"]);return x=function(){return e},e}var k=f()(x()),y=[{value:"both",label:"Both"},{value:"asx",label:"ASX"},{value:"nsx",label:"NSX"}];function g(){var e=Object(n.useState)(JSON.parse(localStorage.getItem("savedData"))),a=Object(o.a)(e,2),t=a[0],r=a[1],i=Object(n.useState)(!0),l=Object(o.a)(i,2),u=l[0],b=l[1],p=Object(n.useState)(!0),f=Object(o.a)(p,2),j=f[0],S=f[1],x=Object(n.useState)(!0),g=Object(o.a)(x,2),w=g[0],A=g[1],X=Object(n.useState)("both"),$=Object(o.a)(X,2),C=$[0],q=$[1],z=w?Object(_.a)(Object(h.a)(Object(O.a)(new Date,1),{hours:16,minutes:0,seconds:0})):Object(_.a)(0),M=Object(m.a)(k,{variables:{is_price_sensitive:u?[!0]:[!0,!1],is_asx_300:j?[!0]:[!0,!1],time_before:z,incl_asx:"asx"===C||"both"===C?"ASX":"",incl_nsx:"nsx"===C||"both"===C?"NSX":""}}),I=M.data,B=M.loading,J=v.a.get(I,"announcements"),R=v.a.map(J,(function(e){var a=e.id;return Object(s.a)(Object(s.a)({},e),{},{read:v.a.get(t,[a,"read"],!1),saved:v.a.get(t,[a,"saved"],!1)})})),F=v.a.filter(R,{read:!1,saved:!1}),G=v.a.filter(R,{saved:!0}),P=v.a.filter(R,{read:!0,saved:!1});return Object(n.useEffect)((function(){t||r({}),localStorage.setItem("savedData",JSON.stringify(t))}),[t]),Object(n.useEffect)((function(){document.title="ASX/NSX Ann Feed (".concat(v.a.size(F)," unread)")}),[F]),Object(n.useEffect)((function(){"asx"!==C&&S(!1)}),[C]),c.a.createElement("div",{className:"body"},c.a.createElement("div",{className:"header"},c.a.createElement(D,null),c.a.createElement("h2",null,"ASX & NSX Recent Announcement Feed"),c.a.createElement("p",null,"A scraped collection of ASX and NSX announcements, data updated every 10 mins.")),c.a.createElement("div",{className:"inputs-box-row"},c.a.createElement("div",{onClick:function(){return b(!u)}},c.a.createElement("p",null,"Price sensitive only?"),u?c.a.createElement(d.a,{icon:E.a}):c.a.createElement(d.a,{icon:E.d,className:"unchecked"})),c.a.createElement("div",{onClick:function(){return S(!j)}},c.a.createElement("p",null,"ASX 300 only?"),j?c.a.createElement(d.a,{icon:E.a}):c.a.createElement(d.a,{icon:E.d,className:"unchecked"})),c.a.createElement("div",{onClick:function(){return A(!w)}},c.a.createElement("p",null,"After 4pm yesterday only?"),w?c.a.createElement(d.a,{icon:E.a}):c.a.createElement(d.a,{icon:E.d,className:"unchecked"})),c.a.createElement("div",null,c.a.createElement("p",null,"Exchange:"),c.a.createElement("select",{value:C,onChange:function(e){return q(e.target.value)}},!v.a.isEmpty(y)&&v.a.map(y,(function(e){var a=e.value,t=e.label;return c.a.createElement("option",{key:a,value:a},t)}))))),B&&c.a.createElement("div",{className:"loader"},c.a.createElement(d.a,{icon:E.c,spin:!0,size:"3x"})),!B&&v.a.isEmpty(F)&&v.a.isEmpty(G)&&v.a.isEmpty(P)&&c.a.createElement("p",{className:"-colour-tertiary"},"No matching announcements"),!v.a.isEmpty(F)&&c.a.createElement("h5",null,"Unread (",v.a.size(F),"):"),!v.a.isEmpty(F)&&v.a.map(F,(function(e){return c.a.createElement(N,{data:e,key:e.id,savedData:t,setSavedData:r})})),!v.a.isEmpty(G)&&c.a.createElement("h5",null,"Saved (",v.a.size(G),"):"),!v.a.isEmpty(G)&&v.a.map(G,(function(e){return c.a.createElement(N,{data:e,key:e.id,savedData:t,setSavedData:r})})),!v.a.isEmpty(P)&&c.a.createElement("h5",null,"Read (",v.a.size(P),"):"),!v.a.isEmpty(P)&&v.a.map(P,(function(e){return c.a.createElement(N,{data:e,key:e.id,savedData:t,setSavedData:r})})))}var N=function(e){var a=e.data,t=e.savedData,n=e.setSavedData,r=a.id,i=a.description,o=a.hotcopper_url,u=a.stock,m=a.time,b=a.read,p=a.saved,f=a.is_price_sensitive,_=u.name,h=u.ticker,O=u.GICS,x=u.exchange,k=u.is_asx_300,y=Object(j.a)(m),g=v.a.compact([O,!!k&&"ASX300",!!f&&"$$"]).join(" - ");return c.a.createElement("div",{className:"card"},c.a.createElement("div",{className:"card-header"},c.a.createElement("div",null,c.a.createElement("a",{href:"https://finance.yahoo.com/quote/".concat(h,".AX"),target:"_blank",rel:"noopener noreferrer"},x,":",h,_&&" - ".concat(_),c.a.createElement(d.a,{icon:E.b,size:"xs"})),c.a.createElement("p",null,g)),c.a.createElement("p",null,Object(S.a)(y,"h:mm aaa '-' EE do MMM"))),c.a.createElement("div",{className:"card-body"},c.a.createElement("a",{href:o,target:"_blank",rel:"noopener noreferrer",onClick:function(){return n(Object(s.a)(Object(s.a)({},t),{},Object(l.a)({},r,{saved:p,read:!0})))}},i,c.a.createElement(d.a,{icon:E.b,size:"xs"})),c.a.createElement("div",{className:"inputs-box-column"},c.a.createElement("div",{onClick:function(){return n(Object(s.a)(Object(s.a)({},t),{},Object(l.a)({},r,{read:b,saved:!p})))}},c.a.createElement("label",null,"Saved"),p?c.a.createElement(d.a,{icon:E.a}):c.a.createElement(d.a,{icon:E.d,className:"unchecked"})),c.a.createElement("div",{onClick:function(){return n(Object(s.a)(Object(s.a)({},t),{},Object(l.a)({},r,{saved:p,read:!b})))}},c.a.createElement("label",null,"Read"),b?c.a.createElement(d.a,{icon:E.a}):c.a.createElement(d.a,{icon:E.d,className:"unchecked"})))))},D=function(){var e=Object(n.useState)(new Date),a=Object(o.a)(e,2),t=a[0],r=a[1],i=Object(n.useState)(!1),l=Object(o.a)(i,2),s=l[0],u=l[1];return Object(n.useEffect)((function(){s||u(setInterval((function(){return r(new Date)}),1e3))}),[s]),c.a.createElement("h3",null,Object(S.a)(t,"h:mm:ss aaa '-' EE do MMM"))},w=t(14),A=t(20),X=t(41),$=t(43),C=t(15),q=t(2),z=t(42);function M(){var e=new $.a({uri:"https://quiet-river-86309.herokuapp.com/v1/graphql"}),a=new X.a({uri:"wss://quiet-river-86309.herokuapp.com/v1/graphql",options:{reconnect:!0,timeout:3e4}}),t=Object(C.d)((function(e){var a=e.query,t=Object(q.l)(a),n=t.kind,c=t.operation;return"OperationDefinition"===n&&"subscription"===c}),a,e),n=new A.c({link:t,cache:new z.a});return c.a.createElement(w.a,{client:n},c.a.createElement(g,null))}i.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(M,null)),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.979510cd.chunk.js.map