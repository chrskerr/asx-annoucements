(this["webpackJsonpasx-annoucements"]=this["webpackJsonpasx-annoucements"]||[]).push([[0],{44:function(e,t,a){e.exports=a(67)},49:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),r=a(35),i=a.n(r),l=(a(49),a(23)),s=a(19),o=a(21),m=a(36),u=(a(50),a(29)),d=a(17),E=a(18),b=a(11),v=a.n(b),p=a(37),f=a.n(p),O=a(69),j=a(72),_=a(73),h=a(70),k=a(71);function S(){var e=Object(m.a)(["\nsubscription SubcribeAnnouncements ( $time_before: timestamptz!, $is_price_sensitive: Boolean!, $is_asx_300: Boolean! ) {\n\tannouncements( \n\t\twhere: { \n\t\t\ttime: { _gte: $time_before },\n\t\t\tis_price_sensitive: { _eq: $is_price_sensitive }, \n\t\t\tstock: { is_asx_300: { _eq: $is_asx_300 }}\n\t\t},\n\t\torder_by: { time: desc }\n\t) {\n\t\tann_download_url\n\t\tdescription\n\t\thotcopper_url\n\t\tid time\n\t\tis_price_sensitive\n\t\tstock {\n\t\t\tname ticker\n\t\t\tis_asx_300 GICS\n\t\t}\n\t}\n}"]);return S=function(){return e},e}var y=f()(S());function N(){var e=Object(n.useState)(JSON.parse(localStorage.getItem("savedData"))),t=Object(o.a)(e,2),a=t[0],r=t[1],i=Object(n.useState)(!0),l=Object(o.a)(i,2),m=l[0],b=l[1],p=Object(n.useState)(!0),f=Object(o.a)(p,2),h=f[0],k=f[1],S=Object(n.useState)(!0),N=Object(o.a)(S,2),w=N[0],x=N[1],A=w?Object(O.a)(Object(j.a)(Object(_.a)(new Date,1),{hours:16,minutes:0,seconds:0})):Object(O.a)(0),q=Object(u.a)(y,{variables:{is_price_sensitive:m,is_asx_300:h,time_before:A}}),z=q.data,C=q.loading,M=v.a.get(z,"announcements"),I=v.a.map(M,(function(e){var t=e.id;return Object(s.a)(Object(s.a)({},e),{},{read:v.a.get(a,[t,"read"],!1),saved:v.a.get(a,[t,"saved"],!1)})})),$=v.a.filter(I,{read:!1,saved:!1}),X=v.a.filter(I,{saved:!0}),J=v.a.filter(I,{read:!0,saved:!1});return Object(n.useEffect)((function(){a||r({}),localStorage.setItem("savedData",JSON.stringify(a))}),[a]),Object(n.useEffect)((function(){document.title="ASX Announcement Feed (".concat(v.a.size($)," unread)")}),[$]),c.a.createElement("div",{className:"body"},c.a.createElement("div",{className:"header"},c.a.createElement(D,null),c.a.createElement("h2",null,"ASX Recent Announcement Feed"),c.a.createElement("p",null,"A scraped collection of ASX announcements, data updated every 10 mins.")),c.a.createElement("div",{className:"inputs-box-row"},c.a.createElement("div",{onClick:function(){return b(!m)}},c.a.createElement("label",null,"Price sensitive only?"),m?c.a.createElement(d.a,{icon:E.a}):c.a.createElement(d.a,{icon:E.d,className:"unchecked"})),c.a.createElement("div",{onClick:function(){return k(!h)}},c.a.createElement("label",null,"ASX 300 only?"),h?c.a.createElement(d.a,{icon:E.a}):c.a.createElement(d.a,{icon:E.d,className:"unchecked"})),c.a.createElement("div",{onClick:function(){return x(!w)}},c.a.createElement("label",null,"After 4pm yesterday only?"),w?c.a.createElement(d.a,{icon:E.a}):c.a.createElement(d.a,{icon:E.d,className:"unchecked"}))),C&&c.a.createElement("div",{className:"loader"},c.a.createElement(d.a,{icon:E.c,spin:!0,size:"3x"})),!v.a.isEmpty($)&&c.a.createElement("h5",null,"Unread (",v.a.size($),"):"),!v.a.isEmpty($)&&v.a.map($,(function(e){return c.a.createElement(g,{data:e,key:e.id,savedData:a,setSavedData:r})})),!v.a.isEmpty(X)&&c.a.createElement("h5",null,"Saved (",v.a.size(X),"):"),!v.a.isEmpty(X)&&v.a.map(X,(function(e){return c.a.createElement(g,{data:e,key:e.id,savedData:a,setSavedData:r})})),!v.a.isEmpty(J)&&c.a.createElement("h5",null,"Read (",v.a.size(J),"):"),!v.a.isEmpty(J)&&v.a.map(J,(function(e){return c.a.createElement(g,{data:e,key:e.id,savedData:a,setSavedData:r})})))}var g=function(e){var t=e.data,a=e.savedData,n=e.setSavedData,r=t.id,i=t.description,o=t.hotcopper_url,m=t.stock,u=t.time,b=t.read,v=t.saved,p=m.name,f=m.ticker,O=m.GICS,j=Object(h.a)(u);return c.a.createElement("div",{className:"card"},c.a.createElement("div",{className:"card-header"},c.a.createElement("div",null,c.a.createElement("a",{href:"https://finance.yahoo.com/quote/".concat(f,".AX"),target:"_blank",rel:"noopener noreferrer"},f," - ",p,c.a.createElement(d.a,{icon:E.b,size:"xs"})),c.a.createElement("p",null,O)),c.a.createElement("p",null,Object(k.a)(j,"h:mm aaa '-' EE do MMM"))),c.a.createElement("div",{className:"card-body"},c.a.createElement("a",{href:o,target:"_blank",rel:"noopener noreferrer",onClick:function(){return n(Object(s.a)(Object(s.a)({},a),{},Object(l.a)({},r,{saved:v,read:!0})))}},i,c.a.createElement(d.a,{icon:E.b,size:"xs"})),c.a.createElement("div",{className:"inputs-box-column"},c.a.createElement("div",{onClick:function(){return n(Object(s.a)(Object(s.a)({},a),{},Object(l.a)({},r,{read:b,saved:!v})))}},c.a.createElement("label",null,"Saved"),v?c.a.createElement(d.a,{icon:E.a}):c.a.createElement(d.a,{icon:E.d,className:"unchecked"})),c.a.createElement("div",{onClick:function(){return n(Object(s.a)(Object(s.a)({},a),{},Object(l.a)({},r,{saved:v,read:!b})))}},c.a.createElement("label",null,"Read"),b?c.a.createElement(d.a,{icon:E.a}):c.a.createElement(d.a,{icon:E.d,className:"unchecked"})))))},D=function(){var e=Object(n.useState)(new Date),t=Object(o.a)(e,2),a=t[0],r=t[1],i=Object(n.useState)(!1),l=Object(o.a)(i,2),s=l[0],m=l[1];return Object(n.useEffect)((function(){s||m(setInterval((function(){return r(new Date)}),1e3))}),[s]),c.a.createElement("h3",null,Object(k.a)(a,"h:mm:ss aaa '-' EE do MMM"))},w=a(14),x=a(20),A=a(41),q=a(43),z=a(15),C=a(2),M=a(42);function I(){var e=new q.a({uri:"https://quiet-river-86309.herokuapp.com/v1/graphql"}),t=new A.a({uri:"wss://quiet-river-86309.herokuapp.com/v1/graphql",options:{reconnect:!0,timeout:3e4}}),a=Object(z.d)((function(e){var t=e.query,a=Object(C.l)(t),n=a.kind,c=a.operation;return"OperationDefinition"===n&&"subscription"===c}),t,e),n=new x.c({link:a,cache:new M.a});return c.a.createElement(w.a,{client:n},c.a.createElement(N,null))}i.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(I,null)),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.f3d67692.chunk.js.map