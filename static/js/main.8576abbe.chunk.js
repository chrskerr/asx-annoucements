(this["webpackJsonpasx-annoucements"]=this["webpackJsonpasx-annoucements"]||[]).push([[0],{45:function(e,a,t){e.exports=t(68)},50:function(e,a,t){},68:function(e,a,t){"use strict";t.r(a);var n=t(1),c=t.n(n),r=t(35),l=t.n(r),i=(t(50),t(23)),s=t(20),o=t(21),m=t(36),u=(t(51),t(29)),d=t(17),p=t(18),v=t(11),E=t.n(v),b=t(37),f=t.n(b),_=t(70),O=t(73),k=t(74),j=t(72),h=t(71),y=t(75),g=t(38),S=t.n(g);function w(){var e=Object(m.a)(["\nsubscription SubcribeAnnouncements ( $time_before: timestamptz!, $is_price_sensitive: [Boolean!], $market_cap_lower: numeric, $market_cap_upper: numeric ) {\n\tannouncements( \n\t\twhere: { \n            time: { _gte: $time_before },\n\t\t\tis_price_sensitive: { _in: $is_price_sensitive },\n            stock: { market_cap: { _gte: $market_cap_lower, _lte: $market_cap_upper }}\n\t\t},\n\t\torder_by: { time: desc }\n\t) {\n\t\tann_download_url\n\t\tdescription\n\t\thotcopper_url\n\t\tid time\n\t\tis_price_sensitive\n\t\tstock {\n\t\t\tname ticker\n\t\t\tGICS exchange\n            market_cap\n\t\t}\n\t}\n}"]);return w=function(){return e},e}var N=f()(w()),D=[{label:"Small Cap",value:"small"},{label:"Medium Cap",value:"medium"},{label:"Large Cap",value:"large"}],x={small:{lower:0,upper:2e9},medium:{lower:2e9,upper:1e10},large:{lower:1e10,upper:1e18}};function C(){var e=Object(n.useState)(JSON.parse(localStorage.getItem("savedData"))),a=Object(o.a)(e,2),t=a[0],r=a[1],l=Object(n.useState)(!0),i=Object(o.a)(l,2),m=i[0],v=i[1],b=Object(n.useState)("small"),f=Object(o.a)(b,2),h=f[0],y=f[1],g=Object(n.useState)(!0),S=Object(o.a)(g,2),w=S[0],C=S[1],A=Object(n.useState)(new Date),z=Object(o.a)(A,2),$=z[0],q=z[1],I=Object(n.useState)(!1),J=Object(o.a)(I,2),X=J[0],R=J[1];Object(n.useEffect)((function(){X||R(setInterval((function(){return q(new Date)}),1e3))}),[X]);var B=w?Object(_.a)(Object(O.a)(Object(k.a)(new Date,1),{hours:16,minutes:0,seconds:0})):Object(_.a)(0),F=Object(u.a)(N,{variables:{is_price_sensitive:m?[!0]:[!0,!1],time_before:B,market_cap_lower:x[h].lower,market_cap_upper:x[h].upper}}),P=F.data,G=F.loading,H=E.a.get(P,"announcements"),L=E.a.map(H,(function(e){var a=e.id;return Object(s.a)(Object(s.a)({},e),{},{read:E.a.get(t,[a,"read"],!1),saved:E.a.get(t,[a,"saved"],!1)})})),U=E.a.filter(L,{read:!1,saved:!1}),K=E.a.filter(L,{saved:!0}),Q=E.a.filter(L,{read:!0,saved:!1});return Object(n.useEffect)((function(){t||r({}),localStorage.setItem("savedData",JSON.stringify(t))}),[t]),Object(n.useEffect)((function(){document.title="ASX  Ann Feed (".concat(E.a.size(U)," unread)")}),[U]),c.a.createElement("div",{className:"body"},c.a.createElement("div",{className:"header"},c.a.createElement("h3",null,Object(j.a)($,"h:mm:ss aaa '-' EE do MMM")),c.a.createElement("h2",null,"ASX Recent Announcement Feed"),c.a.createElement("p",null,"A scraped collection of ASX announcements, data live updated every minute during peak hours."),c.a.createElement("p",null,"History of read and saved annoucments saved locally to your browser.")),c.a.createElement("div",{className:"inputs-box-row"},c.a.createElement("div",{onClick:function(){return v(!m)}},c.a.createElement("p",null,"Price sensitive only?"),m?c.a.createElement(d.a,{icon:p.a}):c.a.createElement(d.a,{icon:p.d,className:"unchecked"})),c.a.createElement("div",null,c.a.createElement("p",null,"Market cap"),c.a.createElement("select",{value:h,onChange:function(e){return y(e.target.value)}},!E.a.isEmpty(D)&&E.a.map(D,(function(e){var a=e.value,t=e.label;return c.a.createElement("option",{key:a,value:a},t)})))),c.a.createElement("div",{onClick:function(){return C(!w)}},c.a.createElement("p",null,"After 4pm yesterday only?"),w?c.a.createElement(d.a,{icon:p.a}):c.a.createElement(d.a,{icon:p.d,className:"unchecked"}))),G&&c.a.createElement("div",{className:"loader"},c.a.createElement(d.a,{icon:p.c,spin:!0,size:"3x"})),!G&&E.a.isEmpty(U)&&E.a.isEmpty(K)&&E.a.isEmpty(Q)&&c.a.createElement("p",{className:"-colour-tertiary"},"No matching announcements"),!E.a.isEmpty(K)&&c.a.createElement("h5",null,"Saved (",E.a.size(K),"):"),!E.a.isEmpty(K)&&E.a.map(K,(function(e){return c.a.createElement(M,{data:e,key:e.id,savedData:t,setSavedData:r})})),!E.a.isEmpty(U)&&c.a.createElement("h5",null,"Unread (",E.a.size(U),"):"),!E.a.isEmpty(U)&&E.a.map(U,(function(e){return c.a.createElement(M,{data:e,key:e.id,savedData:t,setSavedData:r})})),!E.a.isEmpty(Q)&&c.a.createElement("h5",null,"Read (",E.a.size(Q),"):"),!E.a.isEmpty(Q)&&E.a.map(Q,(function(e){return c.a.createElement(M,{data:e,key:e.id,savedData:t,setSavedData:r})})))}var M=function(e){var a=e.data,t=e.savedData,n=e.setSavedData,r=a.id,l=a.description,o=a.hotcopper_url,m=a.stock,u=a.time,v=a.read,b=a.saved,f=a.is_price_sensitive,_=m.name,O=m.ticker,k=m.exchange,g=m.market_cap,w=Object(h.a)(u),N=E.a.compact(["Market Cap: ".concat(S()(g).format("0.0a")),!!f&&"Price Sensitive"]).join(" - "),D=Object(y.a)(new Date,w)<=20;return c.a.createElement("div",{className:"card"},c.a.createElement("div",{className:"card-header"},c.a.createElement("div",null,c.a.createElement("a",{href:"https://finance.yahoo.com/quote/".concat(O,".AX"),target:"_blank",rel:"noopener noreferrer"},k,":",O,_&&" - ".concat(_),c.a.createElement(d.a,{icon:p.b,size:"xs"})),c.a.createElement("p",null,N)),c.a.createElement("p",null,Object(j.a)(w,"h:mm aaa '-' EE do MMM"))),c.a.createElement("div",{className:"card-body"},c.a.createElement("a",{href:o,target:"_blank",rel:"noopener noreferrer"},l,c.a.createElement(d.a,{icon:p.b,size:"xs",className:D?"-colour-tertiary":""})),c.a.createElement("div",{className:"inputs-box-column"},c.a.createElement("div",{onClick:function(){return n(Object(s.a)(Object(s.a)({},t),{},Object(i.a)({},r,{read:!0,saved:!b})))}},c.a.createElement("label",null,"Saved"),b?c.a.createElement(d.a,{icon:p.a}):c.a.createElement(d.a,{icon:p.d,className:"unchecked"})),c.a.createElement("div",{onClick:function(){return n(Object(s.a)(Object(s.a)({},t),{},Object(i.a)({},r,{saved:b,read:!v})))}},c.a.createElement("label",null,"Read"),v?c.a.createElement(d.a,{icon:p.a}):c.a.createElement(d.a,{icon:p.d,className:"unchecked"})))))},A=t(14),z=t(19),$=t(42),q=t(44),I=t(15),J=t(2),X=t(43);function R(){var e=new q.a({uri:"https://quiet-river-86309.herokuapp.com/v1/graphql"}),a=new $.a({uri:"wss://quiet-river-86309.herokuapp.com/v1/graphql",options:{reconnect:!0,timeout:3e4}}),t=Object(I.d)((function(e){var a=e.query,t=Object(J.l)(a),n=t.kind,c=t.operation;return"OperationDefinition"===n&&"subscription"===c}),a,e),n=new z.c({link:t,cache:new X.a});return c.a.createElement(A.a,{client:n},c.a.createElement(C,null))}l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(R,null)),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.8576abbe.chunk.js.map