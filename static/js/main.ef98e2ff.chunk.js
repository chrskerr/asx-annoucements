(this["webpackJsonpasx-annoucements"]=this["webpackJsonpasx-annoucements"]||[]).push([[0],{44:function(e,a,t){e.exports=t(67)},49:function(e,a,t){},67:function(e,a,t){"use strict";t.r(a);var n=t(1),c=t.n(n),r=t(35),l=t.n(r),i=(t(49),t(21)),s=t(18),o=t(19),u=t(36),d=(t(50),t(29)),m=t(26),b=t(27),p=t(13),E=t.n(p),v=t(37),f=t.n(v),h=t(69),O=t(72),j=t(73),_=t(70),k=t(71);function y(){var e=Object(u.a)(["\nsubscription SubcribeAnnouncements ( $time_before: timestamptz!, $is_price_sensitive: Boolean!, $is_asx_300: Boolean! ) {\n    announcements( \n        where: { \n            time: { _gte: $time_before },\n            is_price_sensitive: { _eq: $is_price_sensitive }, \n            stock: { is_asx_300: { _eq: $is_asx_300 }}\n        },\n        order_by: { time: desc }\n    ) {\n        ann_download_url\n        description\n        hotcopper_url\n        id time\n        is_price_sensitive\n        stock {\n            name ticker\n            is_asx_300 GICS\n        }\n    }\n}"]);return y=function(){return e},e}var S=f()(y());function g(){var e=Object(n.useState)(JSON.parse(localStorage.getItem("savedData"))),a=Object(o.a)(e,2),t=a[0],r=a[1],l=Object(n.useState)(!0),i=Object(o.a)(l,2),u=i[0],p=i[1],v=Object(n.useState)(!0),f=Object(o.a)(v,2),_=f[0],k=f[1],y=Object(n.useState)(!0),g=Object(o.a)(y,2),w=g[0],C=g[1],N=w?Object(h.a)(Object(O.a)(Object(j.a)(new Date,1),{hours:16,minutes:0,seconds:0})):Object(h.a)(0),q=Object(d.a)(S,{variables:{is_price_sensitive:u,is_asx_300:_,time_before:N}}),A=q.data,I=q.loading,M=E.a.get(A,"announcements"),$=E.a.map(M,(function(e){var a=e.id;return Object(s.a)(Object(s.a)({},e),{},{read:E.a.get(t,[a,"read"],!1),saved:E.a.get(t,[a,"saved"],!1)})})),J=E.a.filter($,{read:!1,saved:!1}),z=E.a.filter($,{saved:!0}),B=E.a.filter($,{read:!0,saved:!1});return Object(n.useEffect)((function(){t||r({}),localStorage.setItem("savedData",JSON.stringify(t))}),[t]),c.a.createElement("div",{className:"body"},c.a.createElement("div",{className:"header"},c.a.createElement("h2",null,"ASX Recent Announcement Feed"),c.a.createElement(D,null)),c.a.createElement("div",null,c.a.createElement("p",null,"A scraped collection of ASX announcements, data updated every 10 mins.")),c.a.createElement("div",{className:"flex-box"},c.a.createElement("div",null,c.a.createElement("label",null,"Price sensitive only?"),c.a.createElement("input",{type:"checkbox",checked:u,onChange:function(){return p(!u)},disabled:I})),c.a.createElement("div",null,c.a.createElement("label",null,"ASX 300 only?"),c.a.createElement("input",{type:"checkbox",checked:_,onChange:function(){return k(!_)},disabled:I})),c.a.createElement("div",null,c.a.createElement("label",null,"After 4pm yesterday only?"),c.a.createElement("input",{type:"checkbox",checked:w,onChange:function(){return C(!w)},disabled:I})),c.a.createElement("div",{className:"".concat(I?"loading":"loaded")},I?c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,"Connecting"),c.a.createElement(m.a,{icon:b.c,spin:!0,size:"2x"})):c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,"Connected"),c.a.createElement(m.a,{icon:b.a})))),!E.a.isEmpty(J)&&c.a.createElement("h5",null,"Unread:"),!E.a.isEmpty(J)&&E.a.map(J,(function(e){return c.a.createElement(x,{data:e,key:e.id,savedData:t,setSavedData:r})})),!E.a.isEmpty(z)&&c.a.createElement("h5",null,"Saved:"),!E.a.isEmpty(z)&&E.a.map(z,(function(e){return c.a.createElement(x,{data:e,key:e.id,savedData:t,setSavedData:r})})),!E.a.isEmpty(B)&&c.a.createElement("h5",null,"Read:"),!E.a.isEmpty(B)&&E.a.map(B,(function(e){return c.a.createElement(x,{data:e,key:e.id,savedData:t,setSavedData:r})})))}var x=function(e){var a=e.data,t=e.savedData,n=e.setSavedData,r=a.id,l=a.description,o=a.hotcopper_url,u=a.stock,d=a.time,p=a.read,E=a.saved,v=u.name,f=u.ticker,h=u.GICS,O=function(){return n(Object(s.a)(Object(s.a)({},t),{},Object(i.a)({},r,{saved:E,read:!0})))},j=Object(_.a)(d);return c.a.createElement("div",{className:"card"},c.a.createElement("div",{className:"card-header"},c.a.createElement("p",null,f," - ",v," - ",h),c.a.createElement("p",null,Object(k.a)(j,"kk:mm '-' EE do MMM"))),c.a.createElement("div",{className:"card-body"},c.a.createElement("a",{href:o,target:"_blank",rel:"noopener noreferrer",onClick:O},l,c.a.createElement(m.a,{icon:b.b,size:"xs"})),c.a.createElement("div",{className:"read-saved"},c.a.createElement("div",null,c.a.createElement("label",null,"Saved"),c.a.createElement("input",{type:"checkbox",checked:E,onChange:function(){return n(Object(s.a)(Object(s.a)({},t),{},Object(i.a)({},r,{read:p,saved:!E})))}})),c.a.createElement("div",null,c.a.createElement("label",null,"Read"),c.a.createElement("input",{type:"checkbox",checked:p,onChange:O,disabled:p})))))},D=function(){var e=Object(n.useState)(new Date),a=Object(o.a)(e,2),t=a[0],r=a[1],l=Object(n.useState)(!1),i=Object(o.a)(l,2),s=i[0],u=i[1];return Object(n.useEffect)((function(){s&&clearInterval(s),u(setInterval((function(){return r(new Date)}),1e3))}),[]),c.a.createElement("h2",null,Object(k.a)(t,"kk:mm:ss '-' EE do MMM"))},w=t(14),C=t(17),N=t(41),q=t(43),A=t(15),I=t(2),M=t(42);function $(){var e=new q.a({uri:"https://quiet-river-86309.herokuapp.com/v1/graphql"}),a=new N.a({uri:"wss://quiet-river-86309.herokuapp.com/v1/graphql",options:{reconnect:!0,timeout:3e4}}),t=Object(A.d)((function(e){var a=e.query,t=Object(I.l)(a),n=t.kind,c=t.operation;return"OperationDefinition"===n&&"subscription"===c}),a,e),n=new C.c({link:t,cache:new M.a});return c.a.createElement(w.a,{client:n},c.a.createElement(g,null))}l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement($,null)),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.ef98e2ff.chunk.js.map