(this["webpackJsonpasx-annoucements"]=this["webpackJsonpasx-annoucements"]||[]).push([[4],{109:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return D}));var c,n=a(90),s=a(92),i=a(54),r=a(93),d=a(4),o=(a(94),a(21)),j=a(95),l=a(106),u=a(102),b=a.n(u),p=a(104),m=a.n(p),O=a(110),h=a(113),v=a(114),_=a(112),x=a(111),f=a(115),y=a(105),k=a.n(y),g=a(48),S=a.n(g),w=a(20),E=m()(c||(c=Object(r.a)(["\nsubscription SubcribeAnnouncements ( $time_before: timestamptz!, $is_price_sensitive: [Boolean!], $market_cap_lower: numeric, $market_cap_upper: numeric ) {\n\tannouncements( \n\t\twhere: { \n            time: { _gte: $time_before },\n\t\t\tis_price_sensitive: { _in: $is_price_sensitive },\n            stock: { market_cap: { _gte: $market_cap_lower, _lte: $market_cap_upper }}\n\t\t},\n\t\torder_by: { time: desc }\n\t) {\n\t\tann_download_url\n\t\tdescription\n\t\thotcopper_url\n\t\tid time\n\t\tis_price_sensitive\n\t\tstock {\n\t\t\tname ticker\n\t\t\tGICS exchange\n            market_cap\n\t\t}\n\t}\n}"]))),N=[{label:"Micro Cap",value:"micro"},{label:"Small Cap",value:"small"},{label:"Medium Cap",value:"medium"},{label:"Large Cap",value:"large"}],C={micro:{lower:0,upper:2e7},small:{lower:2e7,upper:2e9},medium:{lower:2e9,upper:1e10},large:{lower:1e10,upper:1e18}};function D(){var e=Object(d.useState)(Object(s.a)(Object(s.a)({history:{},is_price_sensitive:!0,market_cap:"small",is_after_4pm_yesterday:!0,filtered_tickers:[]},S.a.getItem("settings")),{},{updateSettings:function(e,t){return c((function(a){return Object(s.a)(Object(s.a)({},a),{},Object(n.a)({},e,t))}))}})),t=Object(i.a)(e,2),a=t[0],c=t[1],r=a.history,u=a.is_price_sensitive,p=a.market_cap,m=a.is_after_4pm_yesterday,x=a.filtered_tickers,f=a.updateSettings,y=Object(d.useState)(new Date),k=Object(i.a)(y,2),g=k[0],D=k[1],A=Object(d.useState)(!1),z=Object(i.a)(A,2),$=z[0],I=z[1];Object(d.useEffect)((function(){$||I(setInterval((function(){return D(new Date)}),1e3))}),[$]);var X=m?Object(O.a)(Object(h.a)(Object(v.a)(new Date,1),{hours:16,minutes:0,seconds:0})):Object(O.a)(0),R=Object(o.useSubscription)(E,{variables:{is_price_sensitive:u?[!0]:[!0,!1],time_before:X,market_cap_lower:C[p].lower,market_cap_upper:C[p].upper}}),F=R.data,G=R.loading,J=b.a.get(F,"announcements"),P=b.a.isEmpty(x)?J:b.a.filter(J,(function(e){return b.a.includes(x,b.a.get(e,"stock.ticker"))})),q=b.a.map(P,(function(e){var t=e.id;return Object(s.a)(Object(s.a)({},e),{},{read:b.a.get(r,[t,"read"],!1),saved:b.a.get(r,[t,"saved"],!1)})})),B=b.a.filter(q,{read:!1,saved:!1}),H=b.a.filter(q,{saved:!0}),L=b.a.filter(q,{read:!0,saved:!1});return Object(d.useEffect)((function(){r||f("history",{}),S.a.setItem("settings",b.a.omit(a,["updateSettings"]))}),[a]),Object(d.useEffect)((function(){document.title="ASX  Ann Feed (".concat(b.a.size(B)," unread)")}),[B]),Object(w.jsxs)("div",{className:"body",children:[Object(w.jsxs)("div",{className:"header",children:[Object(w.jsx)("h3",{children:Object(_.a)(g,"h:mm:ss aaa '-' EE do MMM")}),Object(w.jsx)("h2",{children:"ASX Recent Announcement Feed"}),Object(w.jsx)("p",{children:"A scraped collection of ASX announcements, data live updated every minute during peak hours."}),Object(w.jsx)("p",{children:"History of read and saved annoucments saved locally to your browser."})]}),Object(w.jsxs)("div",{className:"inputs-box-row",children:[Object(w.jsxs)("div",{onClick:function(){return f("is_price_sensitive",!u)},children:[Object(w.jsx)("p",{children:"Price sensitive only?"}),u?Object(w.jsx)(j.a,{icon:l.a}):Object(w.jsx)(j.a,{icon:l.d,className:"unchecked"})]}),Object(w.jsxs)("div",{children:[Object(w.jsx)("p",{children:"Market cap"}),Object(w.jsx)("select",{value:p,onChange:function(e){return f("market_cap",e.target.value)},children:!b.a.isEmpty(N)&&b.a.map(N,(function(e){var t=e.value,a=e.label;return Object(w.jsx)("option",{value:t,children:a},t)}))})]}),Object(w.jsxs)("div",{onClick:function(){return f("is_after_4pm_yesterday",!m)},children:[Object(w.jsx)("p",{children:"After 4pm yesterday only?"}),m?Object(w.jsx)(j.a,{icon:l.a}):Object(w.jsx)(j.a,{icon:l.d,className:"unchecked"})]})]}),G&&Object(w.jsx)("div",{className:"loader",children:Object(w.jsx)(j.a,{icon:l.c,spin:!0,size:"3x"})}),!G&&b.a.isEmpty(B)&&b.a.isEmpty(H)&&b.a.isEmpty(L)&&Object(w.jsx)("p",{className:"-colour-tertiary",children:"No matching announcements"}),!b.a.isEmpty(H)&&Object(w.jsxs)("h5",{children:["Saved (",b.a.size(H),"):"]}),!b.a.isEmpty(H)&&b.a.map(H,(function(e){return Object(w.jsx)(M,{data:e,savedData:r,setSavedData:function(e){return f("history",e)}},e.id)})),!b.a.isEmpty(B)&&Object(w.jsxs)("h5",{children:["Unread (",b.a.size(B),"):"]}),!b.a.isEmpty(B)&&b.a.map(B,(function(e){return Object(w.jsx)(M,{data:e,savedData:r,setSavedData:function(e){return f("history",e)}},e.id)})),!b.a.isEmpty(L)&&Object(w.jsxs)("h5",{children:["Read (",b.a.size(L),"):"]}),!b.a.isEmpty(L)&&b.a.map(L,(function(e){return Object(w.jsx)(M,{data:e,savedData:r,setSavedData:function(e){return f("history",e)}},e.id)}))]})}var M=function(e){var t=e.data,a=e.savedData,c=e.setSavedData,i=t.id,r=t.description,d=t.hotcopper_url,o=t.stock,u=t.time,p=t.read,m=t.saved,O=t.is_price_sensitive,h=o.name,v=o.ticker,y=o.exchange,g=o.market_cap,S=o.GICS,E=Object(x.a)(u),N=b.a.compact(["Market Cap: ".concat(k()(g).format("0.0a")),!!O&&"Price Sensitive"]).join(" - "),C=Object(f.a)(new Date,E)<=20;return Object(w.jsxs)("div",{className:"card",children:[Object(w.jsxs)("div",{className:"card-header",children:[Object(w.jsxs)("div",{children:[Object(w.jsxs)("a",{href:"https://finance.yahoo.com/quote/".concat(v,".AX"),target:"_blank",rel:"noopener noreferrer",children:[y,":",v,h&&" - ".concat(h),Object(w.jsx)(j.a,{icon:l.b,size:"xs"})]}),Object(w.jsx)("p",{children:S}),Object(w.jsx)("p",{children:N})]}),Object(w.jsx)("p",{children:Object(_.a)(E,"h:mm aaa '-' EE do MMM")})]}),Object(w.jsxs)("div",{className:"card-body",children:[Object(w.jsxs)("a",{href:d,target:"_blank",rel:"noopener noreferrer",children:[r,Object(w.jsx)(j.a,{icon:l.b,size:"xs",className:C?"-colour-tertiary":""})]}),Object(w.jsxs)("div",{className:"inputs-box-column",children:[Object(w.jsxs)("div",{onClick:function(){return c(Object(s.a)(Object(s.a)({},a),{},Object(n.a)({},i,{read:!0,saved:!m})))},children:[Object(w.jsx)("label",{children:"Saved"}),m?Object(w.jsx)(j.a,{icon:l.a}):Object(w.jsx)(j.a,{icon:l.d,className:"unchecked"})]}),Object(w.jsxs)("div",{onClick:function(){return c(Object(s.a)(Object(s.a)({},a),{},Object(n.a)({},i,{saved:m,read:!p})))},children:[Object(w.jsx)("label",{children:"Read"}),p?Object(w.jsx)(j.a,{icon:l.a}):Object(w.jsx)(j.a,{icon:l.d,className:"unchecked"})]})]})]})]})}}}]);
//# sourceMappingURL=4.62f16302.chunk.js.map