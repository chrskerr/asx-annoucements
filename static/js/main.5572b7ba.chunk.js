(this["webpackJsonpasx-annoucements"]=this["webpackJsonpasx-annoucements"]||[]).push([[0],{44:function(e,a,t){e.exports=t(67)},49:function(e,a,t){},67:function(e,a,t){"use strict";t.r(a);var n=t(1),c=t.n(n),r=t(35),i=t.n(r),s=(t(49),t(23)),l=t(19),o=t(21),m=t(36),u=(t(50),t(29)),d=t(17),E=t(18),p=t(11),v=t.n(p),b=t(37),f=t.n(b),O=t(69),j=t(72),_=t(73),h=t(70),y=t(71);function k(){var e=Object(m.a)(["\nsubscription SubcribeAnnouncements ( $time_before: timestamptz!, $is_price_sensitive: [Boolean!], $is_asx_300: [Boolean!] ) {\n\tannouncements( \n\t\twhere: { \n            time: { _gte: $time_before },\n\t\t\tis_price_sensitive: { _in: $is_price_sensitive },\n            stock: { is_asx_300: { _in: $is_asx_300 }}\n\t\t},\n\t\torder_by: { time: desc }\n\t) {\n\t\tann_download_url\n\t\tdescription\n\t\thotcopper_url\n\t\tid time\n\t\tis_price_sensitive\n\t\tstock {\n\t\t\tname ticker\n\t\t\tis_asx_300 GICS\n            exchange\n\t\t}\n\t}\n}"]);return k=function(){return e},e}var S=f()(k());function g(){var e=Object(n.useState)(JSON.parse(localStorage.getItem("savedData"))),a=Object(o.a)(e,2),t=a[0],r=a[1],i=Object(n.useState)(!0),s=Object(o.a)(i,2),m=s[0],p=s[1],b=Object(n.useState)(!1),f=Object(o.a)(b,2),h=f[0],y=f[1],k=Object(n.useState)(!0),g=Object(o.a)(k,2),w=g[0],D=g[1],A=w?Object(O.a)(Object(j.a)(Object(_.a)(new Date,1),{hours:16,minutes:0,seconds:0})):Object(O.a)(0),z=Object(u.a)(S,{variables:{is_price_sensitive:m?[!0]:[!0,!1],is_asx_300:h?[!0]:[!0,!1],time_before:A}}),C=z.data,$=z.loading,M=v.a.get(C,"announcements"),X=v.a.map(M,(function(e){var a=e.id;return Object(l.a)(Object(l.a)({},e),{},{read:v.a.get(t,[a,"read"],!1),saved:v.a.get(t,[a,"saved"],!1)})})),q=v.a.filter(X,{read:!1,saved:!1}),I=v.a.filter(X,{saved:!0}),J=v.a.filter(X,{read:!0,saved:!1});return Object(n.useEffect)((function(){t||r({}),localStorage.setItem("savedData",JSON.stringify(t))}),[t]),Object(n.useEffect)((function(){document.title="ASX  Ann Feed (".concat(v.a.size(q)," unread)")}),[q]),c.a.createElement("div",{className:"body"},c.a.createElement("div",{className:"header"},c.a.createElement(x,null),c.a.createElement("h2",null,"ASX Recent Announcement Feed"),c.a.createElement("p",null,"A scraped collection of ASX and NSX announcements, data live updated every minute during peak hours."),c.a.createElement("p",null,"History of read and saved annoucments saved locally to your browser.")),c.a.createElement("div",{className:"inputs-box-row"},c.a.createElement("div",{onClick:function(){return p(!m)}},c.a.createElement("p",null,"Price sensitive only?"),m?c.a.createElement(d.a,{icon:E.a}):c.a.createElement(d.a,{icon:E.d,className:"unchecked"})),c.a.createElement("div",{onClick:function(){return y(!h)}},c.a.createElement("p",null,"ASX 300 only?"),h?c.a.createElement(d.a,{icon:E.a}):c.a.createElement(d.a,{icon:E.d,className:"unchecked"})),c.a.createElement("div",{onClick:function(){return D(!w)}},c.a.createElement("p",null,"After 4pm yesterday only?"),w?c.a.createElement(d.a,{icon:E.a}):c.a.createElement(d.a,{icon:E.d,className:"unchecked"}))),$&&c.a.createElement("div",{className:"loader"},c.a.createElement(d.a,{icon:E.c,spin:!0,size:"3x"})),!$&&v.a.isEmpty(q)&&v.a.isEmpty(I)&&v.a.isEmpty(J)&&c.a.createElement("p",{className:"-colour-tertiary"},"No matching announcements"),!v.a.isEmpty(q)&&c.a.createElement("h5",null,"Unread (",v.a.size(q),"):"),!v.a.isEmpty(q)&&v.a.map(q,(function(e){return c.a.createElement(N,{data:e,key:e.id,savedData:t,setSavedData:r})})),!v.a.isEmpty(I)&&c.a.createElement("h5",null,"Saved (",v.a.size(I),"):"),!v.a.isEmpty(I)&&v.a.map(I,(function(e){return c.a.createElement(N,{data:e,key:e.id,savedData:t,setSavedData:r})})),!v.a.isEmpty(J)&&c.a.createElement("h5",null,"Read (",v.a.size(J),"):"),!v.a.isEmpty(J)&&v.a.map(J,(function(e){return c.a.createElement(N,{data:e,key:e.id,savedData:t,setSavedData:r})})))}var N=function(e){var a=e.data,t=e.savedData,n=e.setSavedData,r=a.id,i=a.description,o=a.hotcopper_url,m=a.stock,u=a.time,p=a.read,b=a.saved,f=a.is_price_sensitive,O=m.name,j=m.ticker,_=m.GICS,k=m.exchange,S=m.is_asx_300,g=Object(h.a)(u),N=v.a.compact([_,!!S&&"ASX300",!!f&&"$$"]).join(" - ");return c.a.createElement("div",{className:"card"},c.a.createElement("div",{className:"card-header"},c.a.createElement("div",null,c.a.createElement("a",{href:"https://finance.yahoo.com/quote/".concat(j,".AX"),target:"_blank",rel:"noopener noreferrer"},k,":",j,O&&" - ".concat(O),c.a.createElement(d.a,{icon:E.b,size:"xs"})),c.a.createElement("p",null,N)),c.a.createElement("p",null,Object(y.a)(g,"h:mm aaa '-' EE do MMM"))),c.a.createElement("div",{className:"card-body"},c.a.createElement("a",{href:o,target:"_blank",rel:"noopener noreferrer",onClick:function(){return n(Object(l.a)(Object(l.a)({},t),{},Object(s.a)({},r,{saved:b,read:!0})))}},i,c.a.createElement(d.a,{icon:E.b,size:"xs"})),c.a.createElement("div",{className:"inputs-box-column"},c.a.createElement("div",{onClick:function(){return n(Object(l.a)(Object(l.a)({},t),{},Object(s.a)({},r,{read:p,saved:!b})))}},c.a.createElement("label",null,"Saved"),b?c.a.createElement(d.a,{icon:E.a}):c.a.createElement(d.a,{icon:E.d,className:"unchecked"})),c.a.createElement("div",{onClick:function(){return n(Object(l.a)(Object(l.a)({},t),{},Object(s.a)({},r,{saved:b,read:!p})))}},c.a.createElement("label",null,"Read"),p?c.a.createElement(d.a,{icon:E.a}):c.a.createElement(d.a,{icon:E.d,className:"unchecked"})))))},x=function(){var e=Object(n.useState)(new Date),a=Object(o.a)(e,2),t=a[0],r=a[1],i=Object(n.useState)(!1),s=Object(o.a)(i,2),l=s[0],m=s[1];return Object(n.useEffect)((function(){l||m(setInterval((function(){return r(new Date)}),1e3))}),[l]),c.a.createElement("h3",null,Object(y.a)(t,"h:mm:ss aaa '-' EE do MMM"))},w=t(14),D=t(20),A=t(41),z=t(43),C=t(15),$=t(2),M=t(42);function X(){var e=new z.a({uri:"https://quiet-river-86309.herokuapp.com/v1/graphql"}),a=new A.a({uri:"wss://quiet-river-86309.herokuapp.com/v1/graphql",options:{reconnect:!0,timeout:3e4}}),t=Object(C.d)((function(e){var a=e.query,t=Object($.l)(a),n=t.kind,c=t.operation;return"OperationDefinition"===n&&"subscription"===c}),a,e),n=new D.c({link:t,cache:new M.a});return c.a.createElement(w.a,{client:n},c.a.createElement(g,null))}i.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(X,null)),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.5572b7ba.chunk.js.map